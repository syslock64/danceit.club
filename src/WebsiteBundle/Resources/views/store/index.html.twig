{% extends 'base.html.twig' %}
{% block javascript %}
<!-- Incluyendo .js de Culqi Checkout-->
<script src="https://checkout.culqi.com/v2"></script>
<!-- Seteando valores de config-->
{% endblock %}
{% block javascripts %}



    <!-- Configura el formulario-->
    <script>
        Culqi.publicKey = 'pk_test_IG34FVVcGX2U7U9m';
        Culqi.init();
    </script>
    {#<script>#}
        {#Culqi.publicKey = 'pk_test_IG34FVVcGX2U7U9m';#}
        {#Culqi.init();#}
        {#(function($){#}
            {#$(function(){#}

        {#// Recibimos el token desde los servidores de Culqi#}
        {#function culqi() {#}
            {#if (Culqi.token) { // Token creado exitosamente!#}
                {#// Obtener el token ID#}
                {#var token = Culqi.token.id;#}
                {#alert('Se ha creado un token: '+token);#}
            {#} else { // Hubo algun problema!#}
                {#// Mostramos JSON de objeto error en consola#}
                {#console.log(Culqi.error);#}
                {#alert(Culqi.error.mensaje);#}
            {#}#}
        {#};#}
            {#});#}
        {#})(jQuery);#}
    {#</script>#}
{% endblock %}
{% block body %}

    //Aquí creamos el formulario de captura de la tarjeta
    <form action="" method="POST" id="culqi-card-form">
        <div>
            <label>
                <span>Correo Electrónico</span>
                <input type="text" size="50" data-culqi="card[email]" id="card[email]">
            </label>
        </div>
        <div>
            <label>
                <span>Número de tarjeta</span>
                <input type="text" size="20" data-culqi="card[number]"  id="card[number]">
            </label>
        </div>
        <div>
            <label>
                <span>CVV</span>
                <input type="text" size="4" data-culqi="card[cvv]" id="card[cvv]">
            </label>
        </div>
        <div>
            <label>
                <span>Fecha expiración (MM/YYYY)</span>
                <input type="text" size="2" data-culqi="card[exp_month]" id="card[exp_month]">
            </label>
            <span>/</span>
            <input type="text" size="4" data-culqi="card[exp_year]" id="card[exp_year]">
        </div>
    </form>
    //Aquí creamos el Token en Culqi con la información de la tarjeta
    <script>
        Culqi.createToken();
    </script>

{% endblock %}